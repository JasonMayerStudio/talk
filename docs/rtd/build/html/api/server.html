
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Server Plugin API &#8212; Talk 4.x.x documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Client Plugin API" href="client.html" />
    <link rel="prev" title="GraphQL API Reference" href="graphql.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="server-plugin-api">
<span id="server-plugin-api"></span><h1>Server Plugin API<a class="headerlink" href="#server-plugin-api" title="Permalink to this headline">¶</a></h1>
<p>The server functionality of our plugin lives inside the <code class="docutils literal notranslate"><span class="pre">index.js</span></code> plugin folder
that exports the configuration of our plugin.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        my-plugin/
        ├── client/
        │   └── ... &lt;-- client side plugin files
        └── index.js &lt;-- base + server plugin index
</pre></div>
</div>
<div class="section" id="hooks">
<span id="hooks"></span><h2>Hooks<a class="headerlink" href="#hooks" title="Permalink to this headline">¶</a></h2>
<p>Each plugin should export a single object with all hooks available on it.</p>
<p><em><strong>Note: You will have access to the whole core and other plugin’s typeDefs,
context, loaders, mutators, resolvers, hooks. This is intentional, as it
encourages composing plugins to merge functionality, like a Slack plugin which
provides a Slack notify context function as well as having the loader for
comments.</strong></em></p>
<p>The following are the hooks available:</p>
<div class="section" id="typedefs">
<span id="typedefs"></span><h3>typeDefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>enum COLOUR {
  RED
  BLUE
}

type Person {
  name: String!
  colour: COLOUR!
}

type RootMutation {
  createPerson(name: String!): Person
}

type RootQuery {
  people: [Person!]
}

type Subscription {
  leader: Person
}
</pre></div>
</div>
<p>Thanks to <a class="reference external" href="https://www.npmjs.com/package/gql-merge">gql-merge</a> the contents of
<code class="docutils literal notranslate"><span class="pre">typeDefs</span></code> should be a string that will be <em>merged</em> with the existing type
definitions. <code class="docutils literal notranslate"><span class="pre">enum</span></code>’s will be appended to, types will be appended, and new types
will be added.</p>
</div>
<div class="section" id="context">
<span id="context"></span><h3>context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">Slack</span><span class="o">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">notify</span><span class="o">:</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="c1">// return a promise after we&#39;re done sending notifications.</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Any property provided here will be added to the context parameter available
inside all resolvers, loaders, mutators, and of course, other context based
plugins.</p>
<p>The top level item must accept a context for the request which it should use to
configure the context plugin before it would be mounted at <code class="docutils literal notranslate"><span class="pre">context.plugins</span></code>.
This plugin above would mount at: <code class="docutils literal notranslate"><span class="pre">context.plugins.Slack</span></code>, or, if you’re using
<a class="reference external" href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">object destructuring</a>, <code class="docutils literal notranslate"><span class="pre">{plugins:</span> <span class="pre">{Slack}}</span></code>.</p>
</div>
<div class="section" id="sort">
<span id="sort"></span><h3>Sort<a class="headerlink" href="#sort" title="Permalink to this headline">¶</a></h3>
<p>A special context hook, <code class="docutils literal notranslate"><span class="pre">Sort</span></code> will allow plugin authors to provide new
methods to sort data. An example is as follows:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">Sort</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">Comments</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// &lt;-- (1)</span>
      <span class="nx">likes</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// &lt;-- (2)</span>
        <span class="nx">startCursor</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">nodes</span><span class="p">,</span> <span class="p">{</span><span class="nx">cursor</span><span class="p">})</span> <span class="p">{</span> <span class="c1">// &lt;-- (3)</span>
          <span class="k">return</span> <span class="nx">cursor</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">cursor</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">endCursor</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">nodes</span><span class="p">,</span> <span class="p">{</span><span class="nx">cursor</span><span class="p">})</span> <span class="p">{</span> <span class="c1">// &lt;-- (4)</span>
          <span class="k">return</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">cursor</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">cursor</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">sort</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">query</span><span class="p">,</span> <span class="p">{</span><span class="nx">cursor</span><span class="p">,</span> <span class="nx">sort</span><span class="p">})</span> <span class="p">{</span> <span class="c1">// &lt;-- (5)</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">cursor</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="nx">cursor</span><span class="p">);</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="nx">query</span><span class="p">.</span><span class="nx">sort</span><span class="p">({</span>
            <span class="s1">&#39;action_counts.like&#39;</span><span class="o">:</span> <span class="nx">sort</span> <span class="o">===</span> <span class="s1">&#39;DESC&#39;</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nx">created_at</span><span class="o">:</span> <span class="nx">sort</span> <span class="o">===</span> <span class="s1">&#39;DESC&#39;</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="p">});</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">}),</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This has a bunch of special features:</p>
<ol class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Comments</span></code> is the name of the type being sorted, this is pluralized and
capitalized.</li>
<li><code class="docutils literal notranslate"><span class="pre">likes</span></code> is the <code class="docutils literal notranslate"><span class="pre">sortBy</span></code> field in lowercase.</li>
<li><code class="docutils literal notranslate"><span class="pre">startCursor</span></code> will retrieve the start cursor based on the current set of
nodes and the current cursor.</li>
<li><code class="docutils literal notranslate"><span class="pre">endCursor</span></code> will retrieve the end cursor based on the current set of nodes
and the current cursor.</li>
<li><code class="docutils literal notranslate"><span class="pre">sort</span></code> will mutate the <code class="docutils literal notranslate"><span class="pre">query</span></code> to apply the sort operations.</li>
</ol>
<p>All the <code class="docutils literal notranslate"><span class="pre">startCursor</span></code>, <code class="docutils literal notranslate"><span class="pre">endCursor</span></code>, and <code class="docutils literal notranslate"><span class="pre">sort</span></code> functions must be provided in
order for the sorting to apply properly.</p>
</div>
<div class="section" id="loaders">
<span id="loaders"></span><h3>loaders<a class="headerlink" href="#loaders" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
  <span class="nx">People</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">load</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">user</span><span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">})</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Loaders should be provided as a function which returns a map which is used in
the resolvers function. These must return a promise or a value.</p>
</div>
<div class="section" id="mutators">
<span id="mutators"></span><h3>mutators<a class="headerlink" href="#mutators" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
  <span class="nx">People</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="nx">user</span><span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span> <span class="nx">name</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Mutators should be provided as a function which returns a map which is used in
the resolvers function. These must return a promise or a value.</p>
</div>
<div class="section" id="resolvers">
<span id="resolvers"></span><h3>resolvers<a class="headerlink" href="#resolvers" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">Person</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">name</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">colour</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Bill likes the colour red, everyone else likes blue.</span>
      <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;bill&#39;</span> <span class="o">?</span> <span class="s1">&#39;RED&#39;</span> <span class="o">:</span> <span class="s1">&#39;BLUE&#39;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">RootQuery</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">people</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span><span class="nx">loaders</span><span class="o">:</span> <span class="p">{</span><span class="nx">People</span><span class="p">}})</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">People</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">RootMutation</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">createPerson</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="p">},</span> <span class="p">{</span><span class="nx">mutators</span><span class="o">:</span> <span class="p">{</span><span class="nx">People</span><span class="p">}})</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">People</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Should return a resolver map as described in the
<a class="reference external" href="http://dev.apollodata.com/tools/graphql-tools/resolvers#Resolver-map">Apollo Docs</a>.</p>
<p>This will merge with the existing resolvers in core and from previous plugins.</p>
</div>
<div class="section" id="hooks">
<span id="id1"></span><h3>hooks<a class="headerlink" href="#hooks" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">RootMutation</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">createPerson</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">post</span><span class="o">:</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span><span class="nx">plugins</span><span class="o">:</span> <span class="p">{</span><span class="nx">Slack</span><span class="p">}},</span> <span class="nx">info</span><span class="p">,</span> <span class="nx">person</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">person</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">person</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">await</span> <span class="nx">Slack</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="sb">`A new person just was created with name </span><span class="si">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">person</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Hooks here are pretty special, for each resolver field, you can specify a
pre/post hook that will execute pre and post field resolution.</p>
<p>If your post function accepts four parameters, then it can modify the field
result. It is <em>required</em> that the function resolves a promise (or returns) with
the modified value or simply the original if you didn’t modify it.</p>
</div>
<div class="section" id="setupfunctions">
<span id="setupfunctions"></span><h3>setupFunctions<a class="headerlink" href="#setupfunctions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">setupFunctions</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">leader</span><span class="o">:</span> <span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">leader</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">filter</span><span class="o">:</span> <span class="p">(</span><span class="nx">person</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">person</span><span class="p">.</span><span class="nx">place</span> <span class="o">===</span> <span class="mi">1</span>
    <span class="p">},</span>
  <span class="p">}),</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Setup functions allow you to create filters that control which pubsub.publish() events
send data to the client. If the type in question contains args, clients may subscribe using those arguments to further filter their subscription.</p>
<p>For more information, see the <a class="reference external" href="https://github.com/apollographql/graphql-subscriptions">Apollo Docs</a>.</p>
</div>
<div class="section" id="tokenusernotfound">
<span id="tokenusernotfound"></span><h3>tokenUserNotFound<a class="headerlink" href="#tokenusernotfound" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">tokenUserNotFound</span><span class="o">:</span> <span class="nx">async</span> <span class="p">({</span><span class="nx">jwt</span><span class="p">,</span> <span class="nx">token</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">profile</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">someExternalService</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">profile</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">UserModel</span><span class="p">.</span><span class="nx">findOneAndUpdate</span><span class="p">({</span>
    <span class="nx">id</span><span class="o">:</span> <span class="nx">profile</span><span class="p">.</span><span class="nx">id</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="nx">profile</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="nx">username</span><span class="o">:</span> <span class="nx">profile</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
    <span class="nx">lowercaseUsername</span><span class="o">:</span> <span class="nx">profile</span><span class="p">.</span><span class="nx">username</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span>
    <span class="nx">roles</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">profiles</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">setDefaultsOnInsert</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="k">new</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">upsert</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">tokenUserNotFound</span></code> hook allows auth integrations to hook into the event
when a valid token is provided but a user can’t be found in the database that
matches the provided id.</p>
<p>The function is async, and should return the user object that was created in the
database, or null if the user wasn’t found. The <code class="docutils literal notranslate"><span class="pre">jwt</span></code> parameter of the object
is the unpacked token, while <code class="docutils literal notranslate"><span class="pre">token</span></code> is the original jwt token string.</p>
</div>
<div class="section" id="tags">
<span id="tags"></span><h3>tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h3>
<p>The tags hook allows a plugin to define tags that are code controlled (added
or enabled by code). Below is an example pulled from the core off topic plugin
on how to create a hook for the <code class="docutils literal notranslate"><span class="pre">OFF_TOPIC</span></code> name:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;OFF_TOPIC&#39;</span><span class="p">,</span>
    <span class="nx">permissions</span><span class="o">:</span> <span class="p">{</span>
      <span class="kr">public</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">self</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">roles</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">},</span>
    <span class="nx">models</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;COMMENTS&#39;</span><span class="p">],</span>
    <span class="nx">created_at</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You can refer to <code class="docutils literal notranslate"><span class="pre">models/schema/tag.js</span></code> for the available schema to match when
creating models to enable/disable specific features.</p>
</div>
<div class="section" id="router">
<span id="router"></span><h3>router<a class="headerlink" href="#router" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nx">router</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/v1/people&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="nx">people</span><span class="o">:</span> <span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Bob&#39;</span><span class="p">}]});</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The Router hook allows you to create a function that accepts the base express
router where you can mount any amount of middleware/routes to do any form of
action needed by external applications.</p>
</div>
<div class="section" id="passport">
<span id="passport"></span><h3>passport<a class="headerlink" href="#passport" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">FacebookStrategy</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;passport-facebook&#39;</span><span class="p">).</span><span class="nx">Strategy</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">UsersService</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;services/users&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="p">{</span><span class="nx">ValidateUserLogin</span><span class="p">,</span> <span class="nx">HandleAuthPopupCallback</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;services/passport&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">passport</span><span class="p">(</span><span class="nx">passport</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">passport</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="k">new</span> <span class="nx">FacebookStrategy</span><span class="p">({</span>
      <span class="nx">clientID</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TALK_FACEBOOK_APP_ID</span><span class="p">,</span>
      <span class="nx">clientSecret</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TALK_FACEBOOK_APP_SECRET</span><span class="p">,</span>
      <span class="nx">callbackURL</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TALK_ROOT_URL</span><span class="si">}</span><span class="sb">/api/v1/auth/facebook/callback`</span><span class="p">,</span>
      <span class="nx">passReqToCallback</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">profileFields</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;displayName&#39;</span><span class="p">,</span> <span class="s1">&#39;picture.type(large)&#39;</span><span class="p">]</span>
    <span class="p">},</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">accessToken</span><span class="p">,</span> <span class="nx">refreshToken</span><span class="p">,</span> <span class="nx">profile</span><span class="p">,</span> <span class="nx">done</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

      <span class="kd">let</span> <span class="nx">user</span><span class="p">;</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">provider</span><span class="p">,</span> <span class="nx">displayName</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">profile</span><span class="p">;</span>
        <span class="nx">user</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">UsersService</span><span class="p">.</span><span class="nx">upsertSocialUser</span><span class="p">(</span>
          <span class="nx">req</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span>
          <span class="nx">id</span><span class="p">,</span>
          <span class="nx">provider</span><span class="p">,</span>
          <span class="nx">displayName</span>
        <span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">ValidateUserLogin</span><span class="p">(</span><span class="nx">profile</span><span class="p">,</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">done</span><span class="p">);</span>
    <span class="p">}));</span>
  <span class="p">},</span>
  <span class="nx">router</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Note that we have to import the passport instance here, it is</span>
    <span class="c1">// instantiated after all the strategies have been mounted.</span>
    <span class="kr">const</span> <span class="p">{</span><span class="nx">passport</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;services/passport&#39;</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">     * Facebook auth endpoint, this will redirect the user immediately to facebook</span>
<span class="cm">     * for authorization.</span>
<span class="cm">     */</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/facebook&#39;</span><span class="p">,</span> <span class="nx">passport</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="s1">&#39;facebook&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">display</span><span class="o">:</span> <span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="nx">authType</span><span class="o">:</span> <span class="s1">&#39;rerequest&#39;</span><span class="p">,</span> <span class="nx">scope</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;public_profile&#39;</span><span class="p">]}));</span>

    <span class="cm">/**</span>
<span class="cm">     * Facebook callback endpoint, this will send the user a html page designed to</span>
<span class="cm">     * send back the user credentials upon successful login.</span>
<span class="cm">     */</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/facebook/callback&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

      <span class="c1">// Perform the facebook login flow and pass the data back through the opener.</span>
      <span class="nx">passport</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="s1">&#39;facebook&#39;</span><span class="p">,</span> <span class="nx">HandleAuthPopupCallback</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">))(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="translations">
<span id="translations"></span><h3>translations<a class="headerlink" href="#translations" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">translations</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;translations.yml&#39;</span><span class="p">),</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Where the <code class="docutils literal notranslate"><span class="pre">translations.yml</span></code> contains:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">en</span><span class="p">:</span>
  <span class="n">embedlink</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">:</span> <span class="s2">&quot;Copy Permalink&quot;</span>
</pre></div>
</div>
<p>Which overrides the copy for the <code class="docutils literal notranslate"><span class="pre">embedlink.copy</span></code> template. You can
also provide other languages as well by using the correct language
prefix.</p>
<p>When creating a plugin using this <code class="docutils literal notranslate"><span class="pre">translations</span></code> hook to override copy
from another plugin, be sure to list it after the plugin it’s overriding
in the <code class="docutils literal notranslate"><span class="pre">plugins.json</span></code> file.</p>
</div>
<div class="section" id="websockets">
<span id="websockets"></span><h3>websockets<a class="headerlink" href="#websockets" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">websockets</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">onConnect</span><span class="o">:</span> <span class="p">(</span><span class="nx">connectionParams</span><span class="p">,</span> <span class="nx">connection</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Do something with the connection params or connection, like</span>
      <span class="c1">// logging it out, or incrementing a metric.</span>
    <span class="p">},</span>
    <span class="nx">onDisconnect</span><span class="o">:</span> <span class="p">(</span><span class="nx">connection</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Do something with the connection params or connection, like</span>
      <span class="c1">// logging it out, or decrementing a metric.</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">websockets</span></code> hook can be used to attach methods to the
<code class="docutils literal notranslate"><span class="pre">onConnect</span></code> and <code class="docutils literal notranslate"><span class="pre">onDisconnect</span></code> events on a server. The intention for
this hook is to allow administrators instrument the active websocket
connections.</p>
</div>
<div class="section" id="schemalevelresolvefunction">
<span id="schemalevelresolvefunction"></span><h3>schemaLevelResolveFunction<a class="headerlink" href="#schemalevelresolvefunction" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">schemaLevelResolveFunction</span><span class="o">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// The GraphQL Operation Name. Example: CoralEmbedStream_Embed</span>
    <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">info</span><span class="p">.</span><span class="nx">operation</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">info</span><span class="p">.</span><span class="nx">operation</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="c1">// Maybe increment a metric based on the operation name...</span>

    <span class="c1">// You must _always_ return the root.</span>
    <span class="k">return</span> <span class="nx">root</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">schemaLevelResolveFunction</span></code> provides a function that is attached
at the schema level, so that all queries that are made will go through. This
can be used to create a better view of the graph landscape by creating metrics
of resolved query names.</p>
</div>
</div>
<div class="section" id="full-example">
<span id="full-example"></span><h2>Full Example<a class="headerlink" href="#full-example" title="Permalink to this headline">¶</a></h2>
<p>Contents of <code class="docutils literal notranslate"><span class="pre">plugins.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;server&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;people&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Located in <code class="docutils literal notranslate"><span class="pre">plugins/people/index.js</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">typeDefs</span><span class="o">:</span> <span class="sb">`</span>
<span class="sb">  enum COLOUR {</span>
<span class="sb">    RED</span>
<span class="sb">    BLUE</span>
<span class="sb">  }</span>

<span class="sb">  type Person {</span>
<span class="sb">    name: String!</span>
<span class="sb">    colour: COLOUR!</span>
<span class="sb">  }</span>

<span class="sb">  type RootMutation {</span>
<span class="sb">    createPerson(name: String!): Person</span>
<span class="sb">  }</span>

<span class="sb">  type RootQuery {</span>
<span class="sb">    people: [Person!]</span>
<span class="sb">  }</span>

<span class="sb">  type Subscription {</span>
<span class="sb">    leader: Person</span>
<span class="sb">  }</span>
<span class="sb">  `</span><span class="p">,</span>
  <span class="nx">context</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Slack</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">({</span>
      <span class="nx">notify</span><span class="o">:</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// return a promise after we&#39;re done sending notifications.</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="nx">loaders</span><span class="o">:</span> <span class="p">({</span><span class="nx">user</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">People</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">load</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">user</span><span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}),</span>
  <span class="nx">mutators</span><span class="o">:</span> <span class="p">({</span><span class="nx">user</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">People</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">people</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="nx">user</span><span class="p">,</span> <span class="nx">name</span><span class="p">});</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}),</span>
  <span class="nx">resolvers</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Person</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">colour</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Bill likes the colour red, everyone else likes blue.</span>
        <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;bill&#39;</span> <span class="o">?</span> <span class="s1">&#39;RED&#39;</span> <span class="o">:</span> <span class="s1">&#39;BLUE&#39;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">RootQuery</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">people</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span><span class="nx">loaders</span><span class="o">:</span> <span class="p">{</span><span class="nx">People</span><span class="p">}})</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">People</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">RootMutation</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">createPerson</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="p">},</span> <span class="p">{</span><span class="nx">mutators</span><span class="o">:</span> <span class="p">{</span><span class="nx">People</span><span class="p">}})</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">People</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">hooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">RootMutation</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">createPerson</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">post</span><span class="o">:</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span><span class="nx">plugins</span><span class="o">:</span> <span class="p">{</span><span class="nx">Slack</span><span class="p">}},</span> <span class="nx">info</span><span class="p">,</span> <span class="nx">person</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">person</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">person</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">await</span> <span class="nx">Slack</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="sb">`A new person just was created with name </span><span class="si">${</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

          <span class="k">return</span> <span class="nx">person</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">setupFunctions</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">leader</span><span class="o">:</span> <span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
      <span class="nx">leader</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">filter</span><span class="o">:</span> <span class="p">(</span><span class="nx">person</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">person</span><span class="p">.</span><span class="nx">place</span> <span class="o">===</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Talk</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-01-talk-quickstart.html">Talk Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-04-planning-architecture.html">Planning your Talk Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-05-pre-launch-checklist.html">Pre-Launch Checklist</a></li>
</ul>
<p class="caption"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02-01-required-configuration.html">Required Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-02-advanced-configuration.html">Advanced Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Integrating</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integrating/asset-management.html">Asset Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/authentication.html">Authenticating with Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/configuring-admin.html">Configuring the Talk Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/configuring-comment-stream.html">Configuring the Talk Comment Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/event-tracking-metrics.html">Tracking Talk Events and Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/notifications.html">Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/styling-css.html">Styling Talk with CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/translations-i18n.html">Translations and i18n</a></li>
</ul>
<p class="caption"><span class="caption-text">Product Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../03-01-product-guide-how-talk-works.html">How Talk Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-02-product-guide-commenter-features.html">Commenter Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-03-product-guide-moderator-features.html">Moderator Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-04-user-roles.html">User Roles in Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-05-product-guide-toxic-comments.html">Toxic Comments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-06-product-guide-configuring-talk.html">Configuring Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-07-product-guide-trust.html">Trust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-08-gdpr.html">GDPR Compliance</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/overview.html">Plugin Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins Directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-05-plugin-recipes.html">Plugin Recipes</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">GraphQL API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphql.html">GraphQL API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Server Plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client Plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="slots.html">Plugin Slots API</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05-01-building-basic-plugin.html">Creating a Basic Pride Reaction Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-02-customizing-plugins-coral-ui.html">Customizing Plugins with Coral UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-03-when-youve-installed-talk.html">What To Do When You’ve Installed Talk</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrating</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06-01-migrating-4-1.html">Migrating to v4.1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-01-migrating-4.html">Migrating to v4.0.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-03-migrating-from-3.html">Migrating from v3.x.x</a></li>
</ul>
<p class="caption"><span class="caption-text">FAQ &amp; Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../07-01-faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-02-troubleshooting-tips.html">Troubleshooting Tips</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="graphql.html" title="previous chapter">GraphQL API Reference</a></li>
      <li>Next: <a href="client.html" title="next chapter">Client Plugin API</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, CoralProject.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/api/server.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>