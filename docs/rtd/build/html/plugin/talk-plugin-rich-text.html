
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>talk-plugin-rich-text &#8212; Talk 4.x.x documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="talk-plugin-slack-notifications" href="talk-plugin-slack-notifications.html" />
    <link rel="prev" title="talk-plugin-respect" href="talk-plugin-respect.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="talk-plugin-rich-text">
<span id="talk-plugin-rich-text"></span><h1>talk-plugin-rich-text<a class="headerlink" href="#talk-plugin-rich-text" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/coralproject/talk/tree/master/plugins/talk-plugin-rich-text/">View Source on GitHub</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">name</span><span class="p">:</span> <span class="n">talk</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">rich</span><span class="o">-</span><span class="n">text</span>
    <span class="n">provides</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">Server</span>
        <span class="o">-</span> <span class="n">Client</span>
</pre></div>
</div>
<p>Enables secure rich text support server-side.</p>
<div class="section" id="installation">
<span id="installation"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Add <code class="docutils literal notranslate"><span class="pre">&quot;talk-plugin-rich-text&quot;</span></code> to the <code class="docutils literal notranslate"><span class="pre">plugins.json</span></code> in your Talk installation.
This plugin provides a server and a client side implementation.</p>
<div class="section" id="note-possible-plugin-conflict">
<span id="note-possible-plugin-conflict"></span><h3>Note: Possible plugin conflict<a class="headerlink" href="#note-possible-plugin-conflict" title="Permalink to this headline">¶</a></h3>
<p>The plugin <code class="docutils literal notranslate"><span class="pre">talk-plugin-comment-content</span></code> will prevent this plugin from rendering comments with rich text styling and is not needed if this plugin is enabled.</p>
</div>
</div>
<div class="section" id="server-implementation">
<span id="server-implementation"></span><h2>Server implementation<a class="headerlink" href="#server-implementation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-does-this-work">
<span id="how-does-this-work"></span><h3>How does this work?<a class="headerlink" href="#how-does-this-work" title="Permalink to this headline">¶</a></h3>
<p>This plugin uses the <code class="docutils literal notranslate"><span class="pre">comment.metadata</span></code> field to store the <code class="docutils literal notranslate"><span class="pre">richTextBody</span></code>. By
adding <code class="docutils literal notranslate"><span class="pre">richTextBody</span></code> to the schema we can later on resolve it as part of the
comment. The original <code class="docutils literal notranslate"><span class="pre">comment.body</span></code> is never touched. Using the <code class="docutils literal notranslate"><span class="pre">metadata</span></code>
field allow us to build plugins that are not invasive to the core and also test
the capabilities of our plugin framework. We encourage you to see the files and
check how easy is to build plugins! If you have any feedback, please let us
know.</p>
</div>
<div class="section" id="configuration">
<span id="configuration"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>There is a <code class="docutils literal notranslate"><span class="pre">config.js</span></code> in the root folder. This file contains the recommended
settings.</p>
<div class="section" id="highlightlinks">
<span id="highlightlinks"></span><h4><code class="docutils literal notranslate"><span class="pre">highlightLinks</span></code><a class="headerlink" href="#highlightlinks" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">boolean</span></code> to highlight links.  Set it to <code class="docutils literal notranslate"><span class="pre">false</span></code> to turn it off.</p>
</div>
<div class="section" id="linkify">
<span id="linkify"></span><h4><code class="docutils literal notranslate"><span class="pre">linkify</span></code><a class="headerlink" href="#linkify" title="Permalink to this headline">¶</a></h4>
<p>Settings for highlighting links. These will only apply if <code class="docutils literal notranslate"><span class="pre">higlightLinks</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
<div class="section" id="dompurify">
<span id="dompurify"></span><h4><code class="docutils literal notranslate"><span class="pre">dompurify</span></code><a class="headerlink" href="#dompurify" title="Permalink to this headline">¶</a></h4>
<p>Rules to sanitize html input.  We use <a class="reference external" href="https://github.com/cure53/DOMPurify">DOMPurify</a> to prevent web attacks and XSS. Here is the complete list of <a class="reference external" href="https://github.com/cure53/DOMPurify">settings</a></p>
</div>
<div class="section" id="jsdom">
<span id="jsdom"></span><h4><code class="docutils literal notranslate"><span class="pre">jsdom</span></code><a class="headerlink" href="#jsdom" title="Permalink to this headline">¶</a></h4>
<p>In order to run html in the server we need <a class="reference external" href="https://github.com/jsdom/jsdom">jsdom</a>. Usually you wouldn’t need to modify this settings.</p>
</div>
</div>
</div>
<div class="section" id="client-implementation">
<span id="client-implementation"></span><h2>Client implementation<a class="headerlink" href="#client-implementation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-does-this-work">
<span id="id1"></span><h3>How does this work?<a class="headerlink" href="#how-does-this-work" title="Permalink to this headline">¶</a></h3>
<p>This plugin contains 2 important components:</p>
<ul class="simple">
<li>The Editor (<code class="docutils literal notranslate"><span class="pre">./components/Editor.js</span></code>)</li>
<li>The Comment Content Renderer (<code class="docutils literal notranslate"><span class="pre">./components/CommentContent.js</span></code>)</li>
</ul>
<p>The editor component utilizes the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content">contentEditable</a> and execCommand API.</p>
<p>If you check our <code class="docutils literal notranslate"><span class="pre">index.js</span></code> you will notice that we inject this editor in the
<code class="docutils literal notranslate"><span class="pre">commentBox</span></code> slot. We do this to replace the core comment box with this one.</p>
<p>Now, in order to render the new styled comments we need a comment renderer. For
this task we will have to replace our core comment renderer by using the
<code class="docutils literal notranslate"><span class="pre">commentContent</span></code> slot.</p>
<p>If you are not familiar with GraphQL <code class="docutils literal notranslate"><span class="pre">client/index.js</span></code> will look complicated,
but fear not! With those functions we specify what to expect from the server
schema, how to perform optimistic updates and how keep the client store updated
with the latest changes.</p>
<p>We encourage you to see the files and check how easy is to build plugins! If you
have any feedback, please let us know.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Talk</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-01-talk-quickstart.html">Talk Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-04-planning-architecture.html">Planning your Talk Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-05-pre-launch-checklist.html">Pre-Launch Checklist</a></li>
</ul>
<p class="caption"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02-01-required-configuration.html">Required Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-02-advanced-configuration.html">Advanced Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Integrating</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integrating/asset-management.html">Asset Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/authentication.html">Authenticating with Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/configuring-admin.html">Configuring the Talk Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/configuring-comment-stream.html">Configuring the Talk Comment Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/event-tracking-metrics.html">Tracking Talk Events and Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/notifications.html">Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/styling-css.html">Styling Talk with CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrating/translations-i18n.html">Translations and i18n</a></li>
</ul>
<p class="caption"><span class="caption-text">Product Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../03-01-product-guide-how-talk-works.html">How Talk Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-02-product-guide-commenter-features.html">Commenter Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-03-product-guide-moderator-features.html">Moderator Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-04-user-roles.html">User Roles in Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-05-product-guide-toxic-comments.html">Toxic Comments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-06-product-guide-configuring-talk.html">Configuring Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-07-product-guide-trust.html">Trust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-08-gdpr.html">GDPR Compliance</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../plugins/overview.html">Plugin Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../plugins.html">Plugins Directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-05-plugin-recipes.html">Plugin Recipes</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/overview.html">GraphQL API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/graphql.html">GraphQL API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/server.html">Server Plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/client.html">Client Plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/slots.html">Plugin Slots API</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05-01-building-basic-plugin.html">Creating a Basic Pride Reaction Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-02-customizing-plugins-coral-ui.html">Customizing Plugins with Coral UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-03-when-youve-installed-talk.html">What To Do When You’ve Installed Talk</a></li>
</ul>
<p class="caption"><span class="caption-text">Migrating</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06-01-migrating-4-1.html">Migrating to v4.1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-01-migrating-4.html">Migrating to v4.0.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-03-migrating-from-3.html">Migrating from v3.x.x</a></li>
</ul>
<p class="caption"><span class="caption-text">FAQ &amp; Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../07-01-faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-02-troubleshooting-tips.html">Troubleshooting Tips</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../plugins.html">Plugins Directory</a><ul>
      <li>Previous: <a href="talk-plugin-respect.html" title="previous chapter">talk-plugin-respect</a></li>
      <li>Next: <a href="talk-plugin-slack-notifications.html" title="next chapter">talk-plugin-slack-notifications</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, CoralProject.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/plugin/talk-plugin-rich-text.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>